<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Collect unique objects. — CollectUniqueObjects • cia</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Collect unique objects. — CollectUniqueObjects"><meta name="description" content="Get the unique set of states along with their log score."><meta property="og:description" content="Get the unique set of states along with their log score."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cia</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/three_node_example.html">An Example of using the Causal Inference Assistant (CIA)</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Collect unique objects.</h1>

      <div class="d-none name"><code>CollectUniqueObjects.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Get the unique set of states along with their log score.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">CollectUniqueObjects</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A cia_chains or cia_chain object.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>dag_collection: A list with entries:</p><ul><li><p>state: List of unique states.</p></li>
<li><p>log_evidence_state: Numeric value representing the evidence calculated
from the states.</p></li>
<li><p>log_state_score: Vector with the log scores for each state.</p></li>
<li><p>log_sampling_prob: Vector with the log of the probability for each
state estimated using the MCMC sampling frequency.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This gets the unique set of states in a cia_object
referred to as objects (\(\mathcal{O}\)). Then it estimates the probability
for each state using two methods. The log_sampling_prob uses the MCMC sampled
frequency to estimate the posterior probability.</p>
<p>An alternative method to estimate the posterior probability for each state
uses the state score. This is recorded in the log_norm_state_score
vector. This approach estimates the log of the normalisation constant assuming
\(\tilde{Z}_\mathcal{O} = \Sigma_{s=1}^S p(\mathcal{O}_s)p(D | \mathcal{O}_s)\) where
\(\{\mathcal{O}_1, \mathcal{O}_2, \mathcal{O}_3, ..., \mathcal{O}_S\}\) is
the set of unique objects in the chain. This assumes that you have captured the
most probable objects, such that \(\tilde{Z}_\mathcal{O}\) is approximately equal to
the true evidence \(Z = \Sigma_{G \in \mathcal{G}} p(G)p(D | G)\) where the
sum across all possible DAGs (\(\mathcal{G}\)). This also makes the
assumption that the exponential of the score is proportional to the posterior
probability, such that
$$p(G|D) \propto p(G)p(D | G) = \prod_i \exp(\text{score}(X_i, \text{Pa}_G(X_i) | D))$$
where \(\text{Pa}_G(X_i)\) is the parents set for node \(X_i\) given the
graph \(G\).</p>
<p>After the normalisation constant has been estimated we then estimate the
log probability of each object as,
$$\log(p(\mathcal{O}|D)) = \log(p(\mathcal{O})p(D|\mathcal{O})) - \log(\tilde{Z}_\mathcal{O}).$$</p>
<p>Preliminary analysis suggests that the sampling frequency approach is more
consistent across chains when estimating marginalised edge probabilities,
and therefore is our preferred method. However, more work needs to be done
here.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mathew Varidel.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

